language: ruby
os: linux
rvm:
- 2.3.0
services:
- postgresql
- redis-server
addons:
  postgresql: '9.4'
before_install:
- gem install mime-types -v 2.6.2
- gem install bundler
before_script:
- cp config/database.travis.yml config/database.yml
- bundle exec rake db:drop db:create db:migrate RAILS_ENV=test
- bundle exec sidekiq -d -L /tmp/sidekiq.log
- sleep 1
script: bundle exec rspec spec
env:
  global:
    # S3_BUCKET
  - secure: DhPREKq+Wh925LIIFnk/Lc0uY1U2jvv3YoUcK1xQcX58v+9MhDGYlHLXVDxuxExzyONFLsAiJ0dVHgm9fz5IsKKL2ZVHRQG4EsgNqkEUSbp84il5NdmugkQy4EICo+nW5Mg/HKULr2kfIlFPGN/vVU0FaNhFPC0R4pGoassTIaE8AJPWQ0kwapriR9qi8B9NGZeyB+U0UXhf6qKwZvZekJNpj5hCwrmZqahFYnhA3gP6xTQvkD2iqqyWioG/u2z92nilPSB2NcuHCm+4Dg8+Zgu9AvY4ndVGxRJjs6VxCXKtCdmh+0c7CZquTLNI10fTpeZ5RKlojo4mA/rZKzbBOcRi8FhN/oq3as7tWA7RYARjiiDI3WeDOypPjLKmWZ8cr/JmHA1hQfUewIv7dd3oX32x+MMbMHbM+QKGpSj02Ml4Bs0iSJDYu/kh9f3sZ+fKSNd8U852+tnSmbtJ2epm+5Med8BbqHZQbEO+zfadKNwxuca77gtShHPkw8CME2uJCjGepVsefV/V8Ylu8IPIgAjAMOD0OFVvGI+pjkIh6ph6m59aNk13idMn8vsPaB33RRtPwLr0d6GQqB6ZhVyK5l3hyD4vBytu/OuiGHCiq4NL3xj/s8v1XirU8yNeop96ZVQ3BOfVuVs6S0pCR5/DKzEmm4/5ygxLI+zfw72kbeo=
    # S3_KEY
  - secure: t+5xajjE1+ObjXUgj8DFfClD73kuJXfHIW9gI/cz9U4JJde6aw1kwU9P8x2ZDmuQBvB6n+YlNiFl2GbvoPsk4Y6C1EqMe/95H2r0217lItSGWUUcwjlOcQ2Q/fPISiEblQnzwHcvPYfgV+hJJB+WK0IwLFWEAubvwtWab1o9O3NfcpWkKCBy6mo7+8p+XUt51uAJEOdrIcGqvTtw/UXRrpgsHYGNvv3UksSFU71D/NQ75Bb2yd9ZWayN0ymgqJ/D+cxdzjD7KoXqzYuGr0qfjJaR27uHhbeBgUOl/n6w39jhLe/4YXZhRmKDv9LoL6EMVVEzCMWQwPRm7XzUhtUTEcLNt7pY1qrXSDOcPpRXYBCjxixpwiMFk3iYyW6relr+oRKoLVwGkQunnyOPfLBVP4drCJp/3RNgMhK6lzwKfq1ePIFSaf/0vlyBWauWkkKgR/agU81d0aOsA6NpD5D9epIK2rZ+eoEf1XTvl1b7GxYX0X6qgIju6k4Ls2gBJ9LyGbRmd43rHe3Kq8WfpN6zAdcgrwlPusSmp2HLYa4ySHCPKI2I0okuHjYs2mvpydOJVBxOeVP/NEAJs20k5P8NwubZZLI3P58s4tDyzJ0QO9odXlLVk0neHJ9bPmLhxohaS1HxX98okDToZqbCY0L1AX9l2N+gJe/u8F3NwQQVfaw=
    # S3_SECRET
  - secure: vSA5K/9kohnLg0fgBT3JIj0N31/jt6jRux7azdgH8K6p7IcRKAdMCX+l19NPgDHlhiI95ujFBO95xXqJWZYfpclJIrfRUCDH63+6Y8qsM/yNlfKXiokbdWngmJkZt435qAVCMuGacwTBG4U4SF5k+AZaIlPGk1r5A1mfH4kADOzjkcOS6wL76Je8ljDEz/5cjJGV3Em7GjbBW+vefNG2+skGvWT+HBJWZleOfqmGR4XABaiKV2kZO8aaWcd8a+2vQGipGV9Hz4gqoJJhSofMWq1n+cBe+4SBCzqwrr3YpZb/xkWSIUYu2aj6azHECf49QeotCN0Fz/+uk+r4JfsdRiKYjNagI07W+odxW1i8dhYvMDEikLKSRs8SuvNUXOmdyXuSxbHdUA/E9gjlNeQaKnw38Jv/AmKS0Q2kLFTDUhpp3WLo6mf18TwSFOB/ZlUmlocGOmAybO495Y/nO5NPRQSHYJ+CipGNUycGsqyb3mg3Yfx1LICA4reLDm0Wcgvl8RDiIVC8gcMusUp0DCW4aUIUQ5f6cUJ22Z4BMcwS1j5GhkIAe9+F1WEwO65GGLZHS0sygk3U2RRfT5HY74RIESaMpD365NHNyE1R1WFimoqzcGcc1Hwbm61pY8IQsw6Q/DBFPnyf8v094zRTGvxilJ954WZrNH20RVKueWyfGwc=
    # SECRET_KEY
  - secure: D2/TjNPrULJJZbQeXpvzFalXOCSt4A/GrxTw0kEc4GAMsOQk0Lzottf7Lhq84B4GU+ntti3q7Jv/Wm3jdQQ5szgMuRNtvcfM6eJqa8IhnQdjDRqcB/TkewKZpRrWXkTdOnLijso45GMYPCNe78gtVyDCoY5cd0P8rjn9MsCWhQviGf8xZU6IhhCxSDsLQUqGkQnsH8obteOzZhTqNBAlPmhDvfv6gyOt7N/1B8gAb5Q4IR5kNdSw2NQrXodPeuozXAxbk3FPoTIrwrsXZdz/XF/mfo2m/L215LIhaZDQMAD1sGhHeqwL+14s7NBbuvdh97RXIGSkxHvkTCVT5UpPx7fiyZNg4zU7nRobat3YJbmGk0Ibn1EBrHs6wHQRH1+Nd5ykryVorw/hcKs7wVDlps/H5cAy1nwpmHXXTXZgYskXuoCOEisq9YcvCIU8fkUfNSR143WjFOVAaOmBHDiDz54dCnc6cAbyI/OTgEaJl4oRCBERCqX5TGDM4iy3x+CNfkJkx5HDwdKW1Wy8+INnK/MxLz7rzCh2Hqx3Q7X6CKZcFnj0gQi38nz7BYQErmLQkuQk24ysYxfi+n+ZW+Ljs0T1Tgun655ou4/KxUpXtdmwXamCHzPqpLSjufzBOl/NDhuxJpAtxcdP4bWhkaXamrLflvi7iJN168Q6uTEBlh8=
    # JWT
  - secure: SJx8voXW01n97s1TveLSrM+/Cpu8avwfEx6R5MIuNwxLDCqT1Yx+5wMe+LDSpnKNtxojzJzhgYgSAMEc1bl1dDuk3nhziuaDsnd6Re470dUzQRXZvOpm4Gi2eUIpCuLIVu4nLtHzpbulEoSLru2r7S6rTbzJ5nxeJqYRFb7QQorRY+LtQEV8NsXT+RsT34wWz7/XOZtYqMUWJ1w6TuqG5EQmAN71+0pUToqZvsl6hFP5QR6Y8e5LygVP/f9UWp0jLzhgOX+RKC5GiDwvtBQZqOgF2vt50E/H9Zq3YHN+57t83yvk6c+Nx1aE/0XVT88+BbNXOSPB8iPtiDlbDdeQzuPclTHGXCqnbBhhmC8aj5qhp/hst7+032LeryIgb+JXeGOMYXhBVrIvQhS+fHOJVORmkNaIkAM83//6aN217xx1xWoWGpBb8hDH9fS02pUIANjOo+iFy2Qn+Y76gkzISOa5jT7wLoMi1oWAvTQn6WYDSV+BiYVotVLCEZhrsm2df7xRYPXknTIn0TP35GshyAUgVoJlhXUmeoi1oJNZ41s/To9BphjKyprv2dhg9SyV5e2HFINPUdjZJWhmhyTeAlcy8myAtNIPyyQkSbjVVBlSZdVVwZcCGRvi7AxNJ/qGvWEzfFxAOtLV7/R7PRUDulgkJAwrsAaUes0goF7BuCU=
  # REDIS_HOST
  - secure: fCfUa+ovIeswzIQOu/nvh494yE/Ie8h1LCb7Sfp8Wh5QsoNR4GrG0fdrcUB4y5aM6+TF3BaWmfXMDtayKUfFHAHF1SbNrQUvaVquHoudNfoZwfi5PmJcWKUx2jCaUfC1ixggVptsmh2QkkDIc7md3J0JApSsQiMJ4mqyuDFWx/j2JOtyhA3heS4nfLrjGzPwbcBCMkAmTvQfuXWiCvcfu8RgDGkhSEIr7fPhIC1lTo5Ceqr2Up1aTNsrt/g2JT6DcR4jOsG52YQPGUS+2k0ar1tzRq2v72AxbwCDs34y+U19ItKyJC3SrE2N6EL5e/cmRlthcr8T+EETBpuE0rVdmJ6uGmLvYWLvNTCx5VVL8MyLSZwOAULZO9DoUSa7Tmoo3WIuEq1PdY4BJB8nupHSSCUXO7D5hCt459QCwDCu2hsY1C2hycXDZ+Q7YrAaAPO/x+DrkfLWz08NGtIJkyYyxm0FycZP/Kb1I4x0qSwn0YllQCEc63HytXzBM4yZ/fZKb3uXk2MYJSXtZ18rH0B/dR9oc/92Ki4IO8Ef85z6NjZWTi6a3aaKo8EZ5FnGtxRi2WYQIcgAqXp37BfRDloyFX3uGuELcJgFFy68dRK8JlcBTVWUtlXctLN9xwU33PwUQO4UXpcnlPmAfUyHn/TYUj729H0arH9m0tt9pZWnOTA=
  # CLIENT_HOST
  - secure: I0SwupykT9cFk7P4UybSpZ5FX6calQvi6PRIu+4lnnFgUKiZet9fRHDR9BmgJj6ys6TBVZNO6Gdb8ggeB6iU5vLqFdIZQHcpzitzM79MTJJjesWFksGMXgbH6XUtDuY0eD2o8NsT8TVXH5B7g3LlnhSkjAVQvRDRqvz1HarxszZiZodnD2wFJNPpVfBShwg2g4nN9M8sYmKuOabfs2yQtt5ozQYkwZO9Cy3Yd4CPiTsZ6oNcBdZCD2MEK+LryDupGih5gNCn9QzWPNGHPnYOMNN88oLjp2sqWnqcbFBxxF/VowQnXd/bi+8w0wYlhWLWXK/nilCyI2/a2KfDd1gNpKSSWfk+LjzJDE/CA19fxRR/jiO/L6u4i/8HCVoWlDO6rJh2N8CIgLGL4QTnZ+f0QbdO4zDLw7CFVDL61iJT5fJzZpw0zly7W0y07RYy+swx/IXM/GuT9fmew3lA7Ekt39V6q/+3fXa2+nQaJymgSAXdXT51f2BFFvTovF4N2zPpONoz7vgffAarIn098llNAY7/g/CYqL7lWHW1cfM83jwWy4CT+C0QPBokU5SJRsgJiwnVE1YzYfaVa8CnpjWl0EUeTW4d4IRqi/knpRych1ruH/K0KvBHbTBVVPltdAuLjSeGSnO4Zw0cK+Jtli4cvrXRP3m6tjbozYt2MKPsRCE=
  # FIREBASE
  - secure: K65PBAY8zESbKx4Y1oThbO8wkG9JIaQCyPupB5zZBCO6NINGN6UlkIjJIhulEgZ4GzJ4BeZsqoJcS6I3DiBhdY1nZJn+SB3F/CDG8GQt1RWShF1z18CD8GyD5aA8u6LBzgYCvqOjqbpm7ks3pEtxZltDkq8hV+HthxZyvrIlv1vIdnZe5qlnE4t/H4ly+5+jdneB7t1CkNXeaBBm+u9jcOjjCG9aS1RuNK5X5dGrGkMKRUCKJx7j3DeM6XHsFhOiJLNiAaF0PgxJQl0uDMRLyDcOG/dAi4i5cnmZ4IWRjcXqXRv7VWuKUKb9V88sHHss3GmVb3eZJqMHEgTGE7Hv5yJMKxxv1puBMpeHOelyYJvdJIgiD96pIFGQmrnz/9iGargGQMwkhLv/qhY9ED7D/DZy5MttxaKxPg7Fr6vBqA2cwrZPZGeWD1UcJaxzq9ic8qLI9FNP33eeVEAAFqTEYp6CAZ7on+HrojrWZUyY7+6+Q+M2MWoHfg/B4hcFshbzjBrXMu1cw3W7/4939+PZw0bQSqYCCo9YQN83cAvmTYID9axsKlrZnAe669pRvcT9bP7e3x40IufQWVSeM9u5nXl/iFpuTRS9sEcQJ7QsI93hO5sJ9Y6Qg6VqCY3ZCzvvVyTiOjKRtb2mjDa0MRLIanGfImcghCOOtMESQ2mTy8k=
